# ~/.config/starship.toml

add_newline = false

# Order of modules on prompt
format = """\
        $status\
        $custom\
        $directory\
        ${custom.ssh_root}\
        ${custom.ssh_user}\
        $hostname\
        $aws\
        $gcloud\
        $singularity\
        $kubernetes\
        $docker_context\
        (â†“ Source control - for right side â†“)\
        $hg_branch\
        $git_branch\
        $git_commit\
        $git_status\
        $git_state\
        (â†‘ Source control - for right side â†‘)\
        $nix_shell\
        $env_var\
        $shlvl\
        $jobs\
        $cmd_duration\
        $line_break\
        (â†‘ above input line â†‘)\
        (â†“ on input line â†“)\
        $character\
    """

[directory]
format = "[$path]($style)[$read_only]($read_only_style) "
truncation_length = 4
home_symbol = "ğŸ  "

[character]
error_symbol = "[â¯](bold red)"

[status]
symbol = "â€¼ï¸"
not_found_symbol = "â‰"
format = '[$symbol[ $signal_name$maybe_int](#FFA500)]($style) '
map_symbol = true
disabled = false

################################################################################
# Custom Commands                                                              #
################################################################################

[directory.substitutions]
"C:/tmp" = "ğŸš§ "
"C:/Tmp" = "ğŸš§ "
"/tmp" = "ğŸš§ "
"/Tmp" = "ğŸš§ "

[custom.workspace]
command = "echo -n $PWD | cut -d / -f 6"
when = """ test "$(p4 g4d)" == "$PWD" """
shell = ["bash", "--noprofile", "--norc"]
format = "[\\[](bold cyan)[$symbol$output](yellow)[\\]](bold cyan) "

[custom.ssh_root]
# disabled = true
description = "Display username on a ssh session, if different from standard user"
command = "echo $USER"
when = '[[ -n "$SSH_CONNECTION" ]] && ([[ "$USER" == "root" ]] || [[ -n "$SUDO_USER" ]] || [[ "$USER" != "$LOGNAME" ]])'
shell = ["bash", "--noprofile", "--norc"]
format = "[$output](red bold)"

[custom.ssh_user]
# disabled = true
description = "Display username, if on a ssh session"
command = "echo $USER"
when = '([[ -n "$SSH_CONNECTION" ]] && [[ "$USER" != "root" ]] && [[ -z "$SUDO_USER" ]] && [[ "$USER" == "$LOGNAME" ]])'
shell = ["bash", "--noprofile", "--norc"]
format = "[$output](cyan)"

################################################################################
# Modules config                                                               #
################################################################################

[git_state]
format = "[|$state:$progress_current/$progress_total]"

# Match github.com:magicmonty/bash-git-prompt
[git_status]
format = "[(\\[$conflicted$staged$modified$deleted$renamed$untracked$stashed$ahead_behind\\])]($white)"

ahead    = "â†‘${count}"
diverged = "â†‘${ahead_count}â†“${behind_count}"
behind   = "â†“${count}"
conflicted = "[ âœ–$countâœ– ](bold red)"
staged     = "[âœš $count](green)"
modified   = "[âœš $count](bold blue)"
deleted    = "[-$count](red)"
renamed    = "[Â»$count](green)"
untracked  = "[â€¦$count](cyan)"
stashed    = "[âš‘ $count](bold blue)"

[username]
disabled = true
# format = "[$user]($style)"
# style_user = "cyan"
# style_root = "red bold"
# show_always = false

[hostname]
format = "[@$hostname](cyan) "
ssh_only = true

[gcloud]
format = '$symbol'

[cmd_duration]
format = "[$duration](bold yellow)"
